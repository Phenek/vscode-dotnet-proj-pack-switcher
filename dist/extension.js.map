{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://vscode-dotnet-proj-pack-switcher/./src/extension.ts","webpack://vscode-dotnet-proj-pack-switcher/external commonjs \"vscode\"","webpack://vscode-dotnet-proj-pack-switcher/./src/commands/addConfiguration.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/commands/createProjpack.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/commands/switchToProjectRef.ts","webpack://vscode-dotnet-proj-pack-switcher/external node-commonjs \"path\"","webpack://vscode-dotnet-proj-pack-switcher/./src/config/projpack.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/utils/solutionUtils.ts","webpack://vscode-dotnet-proj-pack-switcher/external node-commonjs \"child_process\"","webpack://vscode-dotnet-proj-pack-switcher/external node-commonjs \"util\"","webpack://vscode-dotnet-proj-pack-switcher/./src/parsers/slnParser.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/commands/switchToPackageRef.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/ui/status.ts","webpack://vscode-dotnet-proj-pack-switcher/./src/customEditors/projpackEditor.ts","webpack://vscode-dotnet-proj-pack-switcher/webpack/bootstrap","webpack://vscode-dotnet-proj-pack-switcher/webpack/before-startup","webpack://vscode-dotnet-proj-pack-switcher/webpack/startup","webpack://vscode-dotnet-proj-pack-switcher/webpack/after-startup"],"sourcesContent":["// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from 'vscode';\n\n// This method is called when your extension is activated\n// Your extension is activated the very first time the command is executed\nexport function activate(context: vscode.ExtensionContext) {\n\n\t// Use the console to output diagnostic information (console.log) and errors (console.error)\n\t// This line of code will only be executed once when your extension is activated\n\tconsole.log('Congratulations, your extension \"vscode-dotnet-proj-pack-switcher\" is now active!');\n\tconsole.log('[VS Code - .NET Proj/Pack Switcher] activate called');\n\n\t// Diagnostic output: write argv and opened workspace folders to an Output channel\n\tconst output = vscode.window.createOutputChannel('VS Code - .NET Proj/Pack Switcher');\n\toutput.appendLine(`process.argv: ${process.argv.join(' ')}`);\n\tif (vscode.workspace.workspaceFolders && vscode.workspace.workspaceFolders.length > 0) {\n\t\toutput.appendLine('Workspace folders:');\n\t\tfor (const wf of vscode.workspace.workspaceFolders) {\n\t\t\toutput.appendLine(` - ${wf.uri.toString()}`);\n\t\t}\n\t} else {\n\t\toutput.appendLine('No workspace folders in this host');\n\t}\n\toutput.show(true);\n\tcontext.subscriptions.push(output);\n\n\t// Also show a brief notification to guide the user\n\tvscode.window.showInformationMessage('VS Code - .NET Proj/Pack Switcher activated — check Output (VS Code - .NET Proj/Pack Switcher) or Developer Tools console for diagnostics.');\n\n\t// Register VS Code - .NET Proj/Pack Switcher commands and UI\n\timport('./commands/addConfiguration').then(mod => mod.registerAddConfiguration(context));\n\timport('./commands/createProjpack').then(mod => mod.registerCreateProjpack(context));\n\timport('./commands/switchToProjectRef').then(mod => mod.registerSwitchToProjectRef(context));\n\timport('./commands/switchToPackageRef').then(mod => mod.registerSwitchToPackageRef(context));\n\timport('./ui/status').then(mod => mod.initStatusBar(context));\n\t// Register custom editor for .vscode/projpack.json\n\timport('./customEditors/projpackEditor').then(mod => mod.registerProjpackEditor(context));\n\n}\n\n// This method is called when your extension is deactivated\nexport function deactivate() { }\n","module.exports = require(\"vscode\");","import * as vscode from 'vscode';\n\nexport function registerAddConfiguration(context: vscode.ExtensionContext) {\n    // Command to add configuration to .vscode/projpack.json (works when file open or focused)\n    const disposable = vscode.commands.registerCommand('vscode-dotnet-proj-pack-switcher.projpack.addConfiguration', async () => {\n        const ed = vscode.window.activeTextEditor;\n        if (!ed || !ed.document.uri.fsPath.endsWith('.vscode/projpack.json')) {\n            vscode.window.showWarningMessage('Open .vscode/projpack.json to add a configuration.');\n            return;\n        }\n        try {\n            const doc = ed.document;\n            const text = doc.getText();\n            const json = text ? JSON.parse(text) : {};\n            if (!Array.isArray(json.configurations)) { json.configurations = []; }\n            json.configurations.push({\n                packageName: 'Example.Package.Test',\n                packageVersion: '1.0.0',\n                projectPath: 'path/to/project.csproj',\n                PersistRefInSln: false,\n                SlnFolder: 'Libraries',\n                enabled: false\n            });\n\n            const fullRange = new vscode.Range(doc.positionAt(0), doc.positionAt(text.length));\n            const edit = new vscode.WorkspaceEdit();\n            edit.replace(doc.uri, fullRange, JSON.stringify(json, null, 2));\n            await vscode.workspace.applyEdit(edit);\n            await doc.save();\n            vscode.window.showInformationMessage('Configuration added.');\n        } catch (err) {\n            vscode.window.showErrorMessage(String(err));\n        }\n    });\n    context.subscriptions.push(disposable);\n}\n","import * as vscode from 'vscode';\nimport * as path from 'path';\n\nexport async function createProjpackJson(): Promise<void> {\n  const workspaceFolders = vscode.workspace.workspaceFolders;\n  if (!workspaceFolders || workspaceFolders.length === 0) {\n    vscode.window.showErrorMessage('No workspace folder is open. Open a folder to create .vscode/projpack.json.');\n    return;\n  }\n\n  const root = workspaceFolders[0].uri;\n  const vscodeFolder = vscode.Uri.joinPath(root, '.vscode');\n  const projpackUri = vscode.Uri.joinPath(vscodeFolder, 'projpack.json');\n\n  try {\n    // If projpack.json already exists, warn and do not overwrite\n    try {\n      await vscode.workspace.fs.stat(projpackUri);\n      vscode.window.showWarningMessage('.vscode/projpack.json already exists.');\n      return;\n    } catch {\n      // File not found — continue to create it\n    }\n\n    await vscode.workspace.fs.createDirectory(vscodeFolder);\n    const initial = {\n      solutionPath: '',\n      configurations: [\n        {\n          packageName: 'Example.Package.Test',\n          packageVersion: '1.0.0',\n          projectPath: 'path/to/project.csproj',\n          PersistRefInSln: false,\n          SlnFolder: 'Libraries',\n          enabled: false\n        }\n      ] as Array<Record<string, unknown>>\n    };\n    const encoder = new TextEncoder();\n    await vscode.workspace.fs.writeFile(projpackUri, encoder.encode(JSON.stringify(initial, null, 2)));\n    const doc = await vscode.workspace.openTextDocument(projpackUri);\n    await vscode.window.showTextDocument(doc);\n    vscode.window.showInformationMessage('.vscode/projpack.json created. Add configurations and save.');\n  } catch (err) {\n    vscode.window.showErrorMessage(`Failed to create projpack.json: ${err}`);\n  }\n}\n\nexport function registerCreateProjpack(context: vscode.ExtensionContext) {\n  context.subscriptions.push(vscode.commands.registerCommand('vscode-dotnet-proj-pack-switcher.createProjpack', createProjpackJson));\n}\n","import * as vscode from 'vscode';\nimport * as path from 'path';\nimport { readProjpack } from '../config/projpack';\nimport { findCsprojFilesFromSolution, addProjectToSolution, removeProjectFromSolution } from '../utils/solutionUtils';\n\nexport async function switchToProjectRef(): Promise<void> {\n  const workspaceFolders = vscode.workspace.workspaceFolders;\n  if (!workspaceFolders || workspaceFolders.length === 0) {\n    vscode.window.showErrorMessage('Open a workspace first');\n    return;\n  }\n  const root = workspaceFolders[0];\n  const cfg = await readProjpack(root);\n  if (!cfg) {\n    vscode.window.showErrorMessage('No configuration found. Create .vscode/projpack.json first.');\n    return;\n  }\n\n  const csprojUris = await findCsprojFilesFromSolution(root, cfg.solutionPath);\n  if (!csprojUris || csprojUris.length === 0) {\n    vscode.window.showErrorMessage('No .csproj files found in workspace or solution.');\n    return;\n  }\n\n  let processed = 0;\n  for (const cUri of csprojUris) {\n    try {\n      const raw = await vscode.workspace.fs.readFile(cUri);\n      const xml = new TextDecoder().decode(raw);\n      // compute csproj dir and pass it so project paths can be made relative to the csproj file\n      const csprojDir = path.dirname(cUri.fsPath);\n      const updated = applySwitchToProject(xml, cfg.configurations, csprojDir, root.uri.fsPath);\n      if (updated !== xml) {\n        await vscode.workspace.fs.writeFile(cUri, new TextEncoder().encode(updated));\n        processed++;\n\n        // ensure projects referenced by the replacement are present in the solution\n        if (cfg.solutionPath) {\n          for (const conf of cfg.configurations) {\n            if (!conf.enabled || !conf.projectPath || !conf.packageName || !conf.packageVersion) { continue; }\n            try {\n              const slnFolder = (conf as any).SlnFolder ?? (conf as any).slnFolder;\n              // pass undefined for execFn (optional) and provide slnFolder as 5th arg\n              await addProjectToSolution(root.uri.fsPath, cfg.solutionPath, conf.projectPath!, undefined, slnFolder);\n            } catch (err) {\n              vscode.window.showErrorMessage(`Failed to add project to solution: ${err}`);\n            }\n          }\n        }\n      }\n    } catch (err) {\n      vscode.window.showErrorMessage(`Failed to process ${cUri.path}: ${err}`);\n    }\n  }\n  vscode.window.showInformationMessage(`Switch to Project Reference: processed ${processed} project(s).`);\n}\n\nexport { addProjectToSolution, removeProjectFromSolution } from '../utils/solutionUtils';\nexport type { ExecFn } from '../utils/solutionUtils';\n\nexport function registerSwitchToProjectRef(context: vscode.ExtensionContext) {\n  context.subscriptions.push(vscode.commands.registerCommand('vscode-dotnet-proj-pack-switcher.switchToProjectRef', switchToProjectRef));\n}\n\n// exported for unit testing\nexport function replacePackageWithProjectLine(xml: string, packageName: string, packageVersion: string, projectPath: string): string {\n  // preserve newline style\n  const newline = xml.indexOf('\\r\\n') !== -1 ? '\\r\\n' : '\\n';\n  const normalizedPath = projectPath.replace(/\\//g, '\\\\');\n\n  // helper to extract attributes and inner Version if present\n  function extractAttrs(attrText: string, inner?: string) {\n    const includeMatch = attrText.match(/Include\\s*=\\s*['\"]([^'\"]+)['\"]/);\n    const versionAttr = attrText.match(/Version\\s*=\\s*['\"]([^'\"]+)['\"]/i);\n    const include = includeMatch ? includeMatch[1] : '';\n    let version = versionAttr ? versionAttr[1] : '';\n    if (!version && inner) {\n      const innerVer = inner.match(/<Version>\\s*([^<]+)\\s*<\\/Version>/i);\n      if (innerVer) { version = innerVer[1]; }\n    }\n    return { include, version };\n  }\n\n  // replace expanded form first\n  let out = xml.replace(/(^[ \\t]*)<PackageReference\\b([^>]*)>([\\s\\S]*?)<\\/PackageReference>/gmi, (m, indent, attrs, inner) => {\n    const { include, version } = extractAttrs(attrs, inner);\n    if (include === packageName && version === packageVersion) {\n      return `${indent}<ProjectReference Include=\"${normalizedPath}\" />`;\n    }\n    return m;\n  });\n\n  // then replace self-closing form\n  out = out.replace(/(^[ \\t]*)<PackageReference\\b([^>]*)\\/?>/gmi, (m, indent, attrs) => {\n    // skip if this was already replaced above (ProjectReference)\n    if (m.trim().startsWith('<ProjectReference')) { return m; }\n    const { include, version } = extractAttrs(attrs);\n    if (include === packageName && version === packageVersion) {\n      return `${indent}<ProjectReference Include=\"${normalizedPath}\" />`;\n    }\n    return m;\n  });\n\n  return out;\n}\n\nexport function applySwitchToProject(\n  xml: string,\n  configurations: Array<{ packageName: string; packageVersion?: string; projectPath?: string; enabled?: boolean }>,\n  csprojDir?: string,\n  rootFsPath?: string\n): string {\n  return configurations.reduce((acc, conf) => {\n    if (!conf.enabled) { return acc; }\n    if (!conf.packageName || !conf.projectPath || !conf.packageVersion) { return acc; }\n\n    // if csprojDir and rootFsPath are provided, compute relative path from the csproj to the target project\n    let projectPath = conf.projectPath!;\n    if (csprojDir && rootFsPath) {\n      const targetAbs = path.resolve(rootFsPath, conf.projectPath!);\n      projectPath = path.relative(csprojDir, targetAbs);\n    }\n\n    return replacePackageWithProjectLine(acc, conf.packageName, conf.packageVersion!, projectPath);\n  }, xml);\n}\n","module.exports = require(\"path\");","import * as vscode from 'vscode';\n\nexport type ProjPackConfig = {\n  solutionPath: string;\n  configurations: Array<{\n    packageName: string;\n    packageVersion?: string;\n    projectPath?: string;\n    enabled?: boolean;\n    // new options\n    PersistRefInSln?: boolean; // when true, do not remove project from solution when switching back to package refs\n    SlnFolder?: string; // optional solution folder to add the project into\n  }>;\n};\n\nexport async function readProjpack(root: vscode.WorkspaceFolder): Promise<ProjPackConfig | null> {\n  const projpackUri = vscode.Uri.joinPath(root.uri, '.vscode', 'projpack.json');\n  try {\n    const raw = await vscode.workspace.fs.readFile(projpackUri);\n    const text = new TextDecoder().decode(raw);\n    const parsed = JSON.parse(text) as ProjPackConfig;\n    return parsed;\n  } catch (err) {\n    return null;\n  }\n}\n\nexport async function writeProjpack(root: vscode.WorkspaceFolder, config: ProjPackConfig): Promise<void> {\n  const projpackUri = vscode.Uri.joinPath(root.uri, '.vscode', 'projpack.json');\n  const encoder = new TextEncoder();\n  await vscode.workspace.fs.writeFile(projpackUri, encoder.encode(JSON.stringify(config, null, 2)));\n}\n","import * as vscode from 'vscode';\nimport { execFile } from 'child_process';\nimport * as util from 'util';\nimport * as path from 'path';\nimport { listProjectsFromSln } from '../parsers/slnParser';\n\nconst execFileAsync = util.promisify(execFile);\n\nexport type ExecFn = (cmd: string, args: string[]) => Promise<void>;\n\n/**\n * Return all .csproj files referenced by the solution if solutionPath is provided,\n * otherwise fall back to workspace-wide search. Shows a warning if the solution\n * can't be read. (Was previously duplicated in two commands.)\n */\nexport async function findCsprojFilesFromSolution(root: vscode.WorkspaceFolder, solutionPath?: string): Promise<vscode.Uri[]> {\n  if (solutionPath) {\n    const sUri = vscode.Uri.joinPath(root.uri, solutionPath);\n    try {\n      const raw = await vscode.workspace.fs.readFile(sUri);\n      const text = new TextDecoder().decode(raw);\n      const projects = listProjectsFromSln(text);\n      return projects.map(p => {\n        const segments = p.split(/[\\\\/]/);\n        return vscode.Uri.joinPath(root.uri, ...segments);\n      });\n    } catch (err) {\n      vscode.window.showWarningMessage(`Could not read solution '${solutionPath}': ${err}`);\n      return [];\n    }\n  }\n  // fallback: find all csproj files in workspace root\n  const matches = await vscode.workspace.findFiles('**/*.csproj', '**/bin/**');\n  return matches;\n}\n\n/**\n * Add project to solution, using absolute path. Throws when the project file is missing.\n * Shows warnings on failures while invoking dotnet but rethrows the error so callers\n * can decide how to handle it.\n */\nexport async function addProjectToSolution(rootFsPath: string, solutionPath: string | undefined, projectPath: string, execFn?: ExecFn, slnFolder?: string): Promise<void> {\n  if (!solutionPath) { return; }\n  const slnAbs = path.resolve(rootFsPath, solutionPath);\n  try {\n    const raw = await vscode.workspace.fs.readFile(vscode.Uri.file(slnAbs));\n    const text = new TextDecoder().decode(raw);\n\n    // compute project path relative to solution dir and absolute path to the project\n    const projectAbs = path.resolve(rootFsPath, projectPath);\n    const projectRel = path.relative(path.dirname(slnAbs), projectAbs).replace(/\\\\/g, '/');\n    const filename = path.basename(projectAbs);\n\n    // if already referenced in sln, do nothing\n    if (text.indexOf(filename) !== -1 || text.indexOf(projectRel) !== -1) { return; }\n\n    // verify project file exists to give a clearer error early\n    try {\n      await vscode.workspace.fs.stat(vscode.Uri.file(projectAbs));\n    } catch (err) {\n      vscode.window.showWarningMessage(`Project file not found: ${projectAbs}`);\n      throw new Error(`Project file not found: ${projectAbs}`);\n    }\n\n    // ensure dotnet runs with solution folder as cwd so relative paths resolve correctly\n    const run = execFn ?? (async (c, a) => { await execFileAsync(c, a, { cwd: path.dirname(slnAbs) }); });\n    // use absolute path for the project to avoid relative path resolution issues\n    const args = ['sln', slnAbs, 'add', projectAbs];\n    if (slnFolder) {\n      args.push('--solution-folder', slnFolder);\n    }\n\n    try {\n      await run('dotnet', args);\n      vscode.window.showInformationMessage(`Added project ${projectRel} to solution ${solutionPath}`);\n    } catch (err) {\n      vscode.window.showWarningMessage(`Failed to add project ${projectRel} to solution ${solutionPath}: ${err}`);\n      throw err;\n    }\n  } catch (err) {\n    // bubble up after warning where appropriate\n    throw err;\n  }\n}\n\n/**\n * Remove project from solution. If the project is not present in the solution file,\n * nothing is done. Failures invoking dotnet are warned about and rethrown.\n */\nexport async function removeProjectFromSolution(rootFsPath: string, solutionPath: string | undefined, projectPath: string, execFn?: ExecFn): Promise<void> {\n  if (!solutionPath) { return; }\n  const slnAbs = path.resolve(rootFsPath, solutionPath);\n  try {\n    const raw = await vscode.workspace.fs.readFile(vscode.Uri.file(slnAbs));\n    const text = new TextDecoder().decode(raw);\n\n    const projectAbs = path.resolve(rootFsPath, projectPath);\n    const projectRel = path.relative(path.dirname(slnAbs), projectAbs).replace(/\\\\/g, '/');\n    const filename = path.basename(projectAbs);\n\n    // if not present, nothing to do\n    if (text.indexOf(filename) === -1 && text.indexOf(projectRel) === -1) { return; }\n\n    // If project file exists, prefer using absolute path; otherwise fall back to relative path\n    const run = execFn ?? (async (c, a) => { await execFileAsync(c, a, { cwd: path.dirname(slnAbs) }); });\n\n    // Try to stat the project file to verify existence\n    try {\n      await vscode.workspace.fs.stat(vscode.Uri.file(projectAbs));\n      // use absolute path to remove\n      try {\n        await run('dotnet', ['sln', slnAbs, 'remove', projectAbs]);\n      } catch (err) {\n        // fallback to relative path if absolute removal failed\n        try {\n          await run('dotnet', ['sln', slnAbs, 'remove', projectRel]);\n        } catch (err2) {\n          vscode.window.showWarningMessage(`Failed to remove project ${projectRel} from solution ${solutionPath}: ${err2}`);\n          throw err2;\n        }\n      }\n    } catch (statErr) {\n      // project file missing on disk — attempt remove with relative path\n      try {\n        await run('dotnet', ['sln', slnAbs, 'remove', projectRel]);\n      } catch (err) {\n        vscode.window.showWarningMessage(`Failed to remove project ${projectRel} from solution ${solutionPath}: ${err}`);\n        throw err;\n      }\n    }\n\n    vscode.window.showInformationMessage(`Removed project ${projectRel} from solution ${solutionPath}`);\n  } catch (err) {\n    throw err;\n  }\n}\n","module.exports = require(\"child_process\");","module.exports = require(\"util\");","export function listProjectsFromSln(text: string): string[] {\n  const re = /Project\\([^)]*\\) = \"[^\"]+\", \"([^\"]+\\.csproj)\"/gmi;\n  const matches: string[] = [];\n  let m: RegExpExecArray | null;\n  while ((m = re.exec(text)) !== null) {\n    matches.push(m[1]);\n  }\n  return matches;\n}\n","import * as vscode from 'vscode';\nimport { readProjpack } from '../config/projpack';\nimport { findCsprojFilesFromSolution, removeProjectFromSolution } from '../utils/solutionUtils';\n\nimport * as path from 'path';\n\nfunction pathToPattern(p: string): string {\n  return p.split(/[\\\\/]/).map(seg => seg.replace(/[.*+?^${}()|[\\\\]\\\\]/g, '\\\\$&')).join('[\\\\\\\\/]');\n}\n\n// findCsprojFilesFromSolution moved to `src/utils/solutionUtils.ts` (keeps behavior and adds warnings on failure)\n\nexport async function switchToPackageRef(): Promise<void> {\n  const workspaceFolders = vscode.workspace.workspaceFolders;\n  if (!workspaceFolders || workspaceFolders.length === 0) {\n    vscode.window.showErrorMessage('Open a workspace first');\n    return;\n  }\n  const root = workspaceFolders[0];\n  const cfg = await readProjpack(root);\n  if (!cfg) {\n    vscode.window.showErrorMessage('No configuration found. Create .vscode/projpack.json first.');\n    return;\n  }\n\n  const csprojUris = await findCsprojFilesFromSolution(root, cfg.solutionPath);\n  if (!csprojUris || csprojUris.length === 0) {\n    vscode.window.showErrorMessage('No .csproj files found in workspace or solution.');\n    return;\n  }\n\n  let processed = 0;\n  for (const cUri of csprojUris) {\n    try {\n      const raw = await vscode.workspace.fs.readFile(cUri);\n      const xml = new TextDecoder().decode(raw);\n      const updated = applySwitchToPackage(xml, cfg.configurations);\n      if (updated !== xml) {\n        await vscode.workspace.fs.writeFile(cUri, new TextEncoder().encode(updated));\n        processed++;\n\n        // if solution is configured, remove projects corresponding to replaced items from the solution\n        if (cfg.solutionPath) {\n          for (const conf of cfg.configurations) {\n            if (!conf.enabled || !conf.projectPath || !conf.packageName) { continue; }\n            // respect PersistRefInSln configuration (support PascalCase and camelCase)\n            const persist = (conf as any).PersistRefInSln ?? (conf as any).persistRefInSln ?? false;\n            if (persist) { continue; }\n            try {\n              await removeProjectFromSolution(root.uri.fsPath, cfg.solutionPath, conf.projectPath!);\n            } catch (err) {\n              vscode.window.showErrorMessage(`Failed to remove project from solution: ${err}`);\n            }\n          }\n        }\n      }\n    } catch (err) {\n      vscode.window.showErrorMessage(`Failed to process ${cUri.path}: ${err}`);\n    }\n  }\n  vscode.window.showInformationMessage(`Switch to Package Reference: processed ${processed} project(s).`);\n}\n\nexport function registerSwitchToPackageRef(context: vscode.ExtensionContext) {\n  context.subscriptions.push(vscode.commands.registerCommand('vscode-dotnet-proj-pack-switcher.switchToPackageRef', switchToPackageRef));\n}\n\n// exported for unit testing\nexport function replaceProjectWithPackageLine(xml: string, projectPath: string, packageName: string, packageVersion?: string): string {\n  const newline = xml.indexOf('\\r\\n') !== -1 ? '\\r\\n' : '\\n';\n  const csprojName = path.basename(projectPath);\n  const pkgInclude = (name: string, version?: string) => version ? `<PackageReference Include=\"${name}\" Version=\"${version}\" />` : `<PackageReference Include=\"${name}\" />`;\n\n  // match expanded ProjectReference\n  let out = xml.replace(/(^[ \\t]*)<ProjectReference\\b([^>]*)>([\\s\\S]*?)<\\/ProjectReference>/gmi, (m, indent, attrs, inner) => {\n    const includeMatch = attrs.match(/Include\\s*=\\s*['\"]([^'\"]+)['\"]/);\n    const include = includeMatch ? includeMatch[1] : '';\n    if (include && include.indexOf(csprojName) !== -1) {\n      return `${indent}${pkgInclude(packageName, packageVersion)}`;\n    }\n    return m;\n  });\n\n  // match self-closing ProjectReference\n  out = out.replace(/(^[ \\t]*)<ProjectReference\\b([^>]*)\\/?\\>/gmi, (m, indent, attrs) => {\n    // if already replaced above, skip\n    if (m.trim().startsWith('<PackageReference')) { return m; }\n    const includeMatch = attrs.match(/Include\\s*=\\s*['\"]([^'\"]+)['\"]/);\n    const include = includeMatch ? includeMatch[1] : '';\n    if (include && include.indexOf(csprojName) !== -1) {\n      return `${indent}${pkgInclude(packageName, packageVersion)}`;\n    }\n    return m;\n  });\n\n  return out;\n}\n\nexport function applySwitchToPackage(xml: string, configurations: Array<{ packageName: string; packageVersion?: string; projectPath?: string; enabled?: boolean }>): string {\n  return configurations.reduce((acc, conf) => {\n    if (!conf.enabled) { return acc; }\n    if (!conf.packageName || !conf.projectPath) { return acc; }\n    return replaceProjectWithPackageLine(acc, conf.projectPath!, conf.packageName, conf.packageVersion);\n  }, xml);\n}\n\n// exported helper used by switchToPackageRef to decide whether to remove the project from the solution\nexport function shouldRemoveProjectFromSolution(conf: any): boolean {\n  return !((conf as any).PersistRefInSln ?? (conf as any).persistRefInSln ?? false);\n}\nexport { removeProjectFromSolution } from '../utils/solutionUtils';\nexport type { ExecFn } from '../utils/solutionUtils';\n","import * as vscode from 'vscode';\n\nexport function initStatusBar(context: vscode.ExtensionContext) {\n  const status = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 100);\n  status.text = 'ProjPack';\n  status.tooltip = 'VS Code - .NET Proj/Pack Switcher: Click to switch reference type';\n  status.command = 'workbench.action.showCommands';\n  status.show();\n  context.subscriptions.push(status);\n}\n","import * as vscode from 'vscode';\n\nexport class ProjpackEditor implements vscode.CustomTextEditorProvider {\n  public static register(context: vscode.ExtensionContext) {\n    const provider = new ProjpackEditor(context);\n    const providerRegistration = vscode.window.registerCustomEditorProvider(\n      ProjpackEditor.viewType,\n      provider,\n      { supportsMultipleEditorsPerDocument: false }\n    );\n    context.subscriptions.push(providerRegistration);\n  }\n\n  private static readonly viewType = 'vscode-dotnet-proj-pack-switcher.projpackEditor';\n\n  constructor(private readonly context: vscode.ExtensionContext) { }\n\n  public async resolveCustomTextEditor(\n    document: vscode.TextDocument,\n    webviewPanel: vscode.WebviewPanel,\n    _token: vscode.CancellationToken\n  ): Promise<void> {\n    webviewPanel.webview.options = { enableScripts: true };\n\n    // Setup initial content in the webview\n    webviewPanel.webview.html = this.getHtmlForWebview(webviewPanel.webview);\n\n    // Send initial document text\n    const updateWebview = () => {\n      webviewPanel.webview.postMessage({ type: 'init', text: document.getText() });\n    };\n\n    // Respond to messages from the webview\n    webviewPanel.webview.onDidReceiveMessage(async (msg) => {\n      if (msg?.command === 'addConfiguration') {\n        await this.addConfigurationToDocument(document);\n        updateWebview();\n      }\n    });\n\n    // Update when the document changes\n    const changeDocumentSubscription = vscode.workspace.onDidChangeTextDocument((e) => {\n      if (e.document.uri.toString() === document.uri.toString()) {\n        updateWebview();\n      }\n    });\n\n    webviewPanel.onDidDispose(() => {\n      changeDocumentSubscription.dispose();\n    });\n\n    // Initial sync\n    updateWebview();\n  }\n\n  private async addConfigurationToDocument(document: vscode.TextDocument) {\n    try {\n      const text = document.getText();\n      const json = text ? JSON.parse(text) : {};\n      if (!Array.isArray(json.configurations)) { json.configurations = []; }\n      json.configurations.push({ name: 'New configuration' });\n\n      const fullRange = new vscode.Range(document.positionAt(0), document.positionAt(text.length));\n      const edit = new vscode.WorkspaceEdit();\n      edit.replace(document.uri, fullRange, JSON.stringify(json, null, 2));\n      await vscode.workspace.applyEdit(edit);\n      await document.save();\n      vscode.window.showInformationMessage('Configuration added.');\n    } catch (err) {\n      vscode.window.showErrorMessage(String(err));\n    }\n  }\n\n  private getHtmlForWebview(webview: vscode.Webview): string {\n    const nonce = getNonce();\n    // Simple UI: show file content and a floating blue button bottom-right\n    return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src 'nonce-${nonce}';\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <style>\n    body { font-family: var(--vscode-editor-font-family); color: var(--vscode-editor-foreground); background: var(--vscode-editor-background); margin:0; padding:1rem; }\n    pre { white-space: pre-wrap; word-wrap: break-word; }\n    .button { position: fixed; right: 20px; bottom: 20px; background: #007acc; color: white; border: none; padding: 12px 16px; border-radius: 6px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }\n    .button:active { transform: translateY(1px); }\n  </style>\n</head>\n<body>\n  <pre id=\"content\">Loading…</pre>\n  <button class=\"button\" id=\"add\">+ Add configuration</button>\n\n  <script nonce=\"${nonce}\">\n    const vscode = acquireVsCodeApi();\n    const content = document.getElementById('content');\n    const btn = document.getElementById('add');\n    window.addEventListener('message', event => {\n      const msg = event.data;\n      if (msg?.type === 'init') {\n        content.textContent = msg.text || '';\n      }\n    });\n    btn.addEventListener('click', () => {\n      vscode.postMessage({ command: 'addConfiguration' });\n    });\n  </script>\n</body>\n</html>`;\n  }\n}\n\nfunction getNonce() {\n  let text = '';\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < 32; i++) { text += possible.charAt(Math.floor(Math.random() * possible.length)); }\n  return text;\n}\n\nexport function registerProjpackEditor(context: vscode.ExtensionContext) {\n  ProjpackEditor.register(context);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(0);\n",""],"names":[],"ignoreList":[],"sourceRoot":""}